/* global io */var ThreePin=function(){function p(e){l&&console.log(e)}function d(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState<4)return;if(e.status!==200)throw new Error("ThreePin.js : configuration file not found");if(e.readyState===4){a=JSON.parse(e.response);m()}};e.open("GET","./threepin.json",!0);e.send("")}function v(){t=e.querySelector("#conf-url");n=e.querySelector("#conf-port");r=e.querySelector("#conf button");f=e.querySelector("#status");r.addEventListener?r.addEventListener("click",g,!1):r.attachEvent&&r.attachEvent("onclick",g);u=c.DISCONNECTED;d()}function m(){a.serverPort&&n.setAttribute("value",a.serverPort);a.serverUrl&&t.setAttribute("value",a.serverUrl)}function g(){var e;s=t.value;o=n.value;e=s+":"+o;y(c.CONNECTING);i=io.connect(e);i.on("connect",function(){y(c.CONNECTED)});i.on("disconnect",function(){y(c.DISCONNECTED)})}function y(e){var t=s+":"+o;switch(e){case c.CONNECTED:p("Connection to: "+t);b(c.CONNECTED);break;case c.CONNECTING:p("Connecting to: "+t);b(c.CONNECTING);break;case c.DISCONNECTED:p("Disconnected from: "+t);b(c.DISCONNECTED)}}function b(e){f.classList.remove(h[u]);f.classList.add(h[e]);u=e}var e=document,t,n,r,i,s,o,u,a,f,l=!0,c={CONNECTING:1,CONNECTED:2,DISCONNECTED:0},h=["disconnected","connecting","connected"];v()}();